<!DOCTYPE html>
<html lang='ja'>

<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content="device-width, initial-scale=1.0">
    <meta http-equiv='X-UA-Compatible' content="ie=edge">
    <title>Number Classifier</title>
    <link rel='stylesheet' href="./static/stylesheet.css">
</head>

<body>
    <header>
        <img class='header_img' src="https://aidemyexstorage.blob.core.windows.net/aidemycontents/1621500180546399.png"
            alt="Aidemy">
        <a class='header-logo' href="#">Number Classifier</a>
    </header>

    <div class='main'>
        <h2> AIが送信された画像の数字を識別します</h2>
        <p>画像を送信してください</p>
        <form method='POST' enctype="multipart/form-data">
            <input class='file_choose' type="file" name="files[]" multiple="true" id="images">
            <input class='btn' value="submit!" type="submit" id="button1">
        </form>
        {% if predicted%}
        {% if predicted==True %}
        {% for img_name, answer in outputs.items()%}
        <div style="text-align: center">
            <img src="../static/cache/{{ img_name }}" alt="{{img_name}}" widht="300" height="300">
        </div>
        <div class='answer'> 傷の数は{{answer}}です。</div>
        {% endfor %}
        {% endif %}
        <h3>
            <div class='diff' style="text-align: center"> 増えた傷の数は{{diff}}です。</div>
        </h3>
        {% endif %}
    </div>
</body>

</html>

<script type="text/javascript">
    const input = document.querySelector('#images');

    // Listen for files selection
    input.addEventListener('change', (e) => {
        // Retrieve all files
        const files = input.files;
        document.getElementById("button1").disabled = false;
        // Check files count
        if (files.length != 2) {
            alert(`Only 2 files are allowed to upload.`);
            document.getElementById("button1").disabled = true;
            return;
        }

    });
</script>